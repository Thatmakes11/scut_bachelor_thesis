\documentclass[UTF8, twoside, 12pt]{ctexart}

% Packages

\usepackage{graphicx, fancyhdr, subfigure, enumitem}
\usepackage[a4paper, bottom=25mm]{geometry}
\usepackage{setspace, parskip}
\usepackage{xeCJK}
\usepackage[no-math]{fontspec}
\usepackage{titlesec, titletoc}
\usepackage[subfigure]{tocloft}
\usepackage{amsmath}
\usepackage{caption, tabularx, array, etoolbox, multirow}
\usepackage{chngcntr}
\usepackage{appendix}
\usepackage[backend=biber, style=numeric, sorting=none, maxnames=3, minnames=3]{biblatex}
\addbibresource{contents/references.bib}


% document class settings

\usepackage[table]{xcolor}
% \usepackage{longtable}

\usepackage{float}
\usepackage{listings}

% flush settings
\raggedbottom


% document class settings
\geometry{
  left=25mm,
  right=25mm,
  bindingoffset=0cm,
}

\setlength{\parskip}{0pt}
\setcounter{secnumdepth}{4}

\titleformat{\paragraph}[block]{\zihao{-4}\heiti}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{\baselineskip}{0pt}

\renewcommand\theparagraph{\thesubsubsection.\arabic{paragraph}}


% reference settings
\AtEveryCite{\fontsize{12}{14}\selectfont}

\DeclareCiteCommand{\supercite}[\mkbibsuperscript]
  {\iffieldundef{prenote}
     {}
     {\BibliographyWarning{Ignoring prenote argument}}%
   \iffieldundef{postnote}
     {}
     {\BibliographyWarning{Ignoring postnote argument}}%
   \bibopenbracket}%
  {\usebibmacro{citeindex}%
   \usebibmacro{cite}}
  {\supercitedelim}
  {\bibclosebracket}


% table of contents settings
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftsecfont}{\heiti}
\renewcommand{\cftsecpagefont}{\songti}
\renewcommand{\contentsname}{\hfill \heiti 目录 \hfill}


% section settings
\titleformat{name=\section,numberless}[block]
{\centering\fontsize{18pt}{16pt}\selectfont\heiti}
{}
{0pt}
{\vspace{0.5\baselineskip}\hspace{-0.5em}}
\titlespacing{\section}{0pt}{0.5\baselineskip}{0.5\baselineskip}

\titleformat{\section}[block]
{\centering\fontsize{18pt}{16pt}\selectfont\heiti}
{第\chinese{section}章\hspace{1em}}
{0pt}
{\vspace{0.5\baselineskip}\hspace{-0.5em}}
\titlespacing{\section}{0pt}{0.5\baselineskip}{0.5\baselineskip}

\ctexset {
    section = {
        name = {第,章},
        number = \chinese{section},
    }
}


% subsection settings
\titleformat{\subsection}
{\bfseries\fontsize{15pt}{12pt}\selectfont\heiti}
{\normalfont\thesubsection}{0.5em}{}
\titlespacing{\subsection}{0pt}{0.5\baselineskip}{0.5\baselineskip}


% subsubsection settings
\titleformat{\subsubsection}
{\bfseries\fontsize{14pt}{12pt}\selectfont\heiti}
{\normalfont\thesubsubsection}{0.5em}{}


% paragraph indent settings
\setlength{\parindent}{2em}


% font settings
\setmainfont{Times New Roman}

% if you are using a Windows:
% \setCJKmainfont{SimSun}

% if you are using a macOS 14:
\setCJKmainfont{STSongti-SC-Light}


% page head and foot settings
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[C]{\thepage}

\fancyhead[CO]{\leftmark}
\fancyhead[CE]{华南理工大学学士学位论文}

\setlength{\headheight}{14.5pt}

\renewcommand{\headrulewidth}{0.4pt}


% equation settings
\numberwithin{equation}{section}


% table settings
\renewcommand{\thetable}{\thesection.\arabic{table}}
\renewcommand{\arraystretch}{2}
\tabcolsep=1cm

\DeclareCaptionFont{tablefontsize}{\fontsize{10.5pt}{12.6pt}\selectfont}
\AtBeginEnvironment{tabular}{\fontsize{10.5pt}{12.6pt}\selectfont}
\captionsetup[table]{font={tablefontsize}}
\captionsetup[table]{labelsep=space}


% figure settings
\counterwithin{figure}{section}
\renewcommand{\thefigure}{\thesection.\arabic{figure}}
\captionsetup[figure]{font={tablefontsize}}
\captionsetup[figure]{labelsep=space}
\renewcommand\thesubfigure{\alph{subfigure})}


% list code settings
\DeclareCaptionLabelFormat{myformat}{图 \Alph{subsection}.#2}
\captionsetup[lstlisting]{labelformat=myformat}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    lineskip=0.5pt,
    columns=fullflexible,
}
\lstset{style=mystyle}


% personal preferences
\newcommand{\np}{NumPy}


\begin{document}

\title{基于卷积神经网络的手写数字及写字人识别}
\author{Sun Chang}
\date{\today}

\newcommand{\authorname}{Your name}
\newcommand{\school}{Your school}
\newcommand{\major}{Your major}
\newcommand{\studentid}{Your student id}
\newcommand{\tutor}{Your tutor}
\newcommand{\submitdate}{2024年\ 05月\ 00日}

\input{contents/cover.tex}
\input{contents/statement.tex}
\input{contents/abstract.tex}
\input{contents/tableofcontents.tex}

\input{contents/body/chap1_introduction.tex}
\input{contents/body/chap2_related-works.tex}
\input{contents/body/chap3_methods.tex}
\input{contents/body/chap4_experiments.tex}
\input{contents/body/conclusion.tex}

\printbibliography[title={参考文献}]
\addcontentsline{toc}{section}{参考文献}
\newpage

\input{contents/appendix.tex}
\input{contents/acknowledgements.tex}

\end{document}
